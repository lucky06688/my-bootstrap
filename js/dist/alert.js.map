{"version":3,"sources":["../src/alert.js"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","Selector","DISMISS","Event","CLOSE","CLOSED","CLICK_DATA_API","ClassName","ALERT","FADE","SHOW","Alert","element","_element","close","rootElement","_getRootElement","customEvent","_triggerCloseEvent","isDefaultPrevented","_removeElement","dispose","removeData","selector","Util","getSelectorFromElement","parent","closest","closeEvent","trigger","removeClass","hasClass","_destoryElement","transitionDuration","getTransitionDurationFromElement","one","TRANSITION_END","event","emulateTransitionEnd","detach","remove","_jQueryInterface","config","each","$element","data","_handleDismiss","alertInstance","preventDefault","document","on","Constructor","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery';\r\nimport Util from './util';\r\n\r\n/**\r\n * alert.js\r\n */\r\n\r\n\r\n/**\r\n * Constants\r\n */\r\nconst NAME = 'alert';\r\nconst VERSION = '1.0.0';\r\nconst DATA_KEY = 'bs.alert';\r\nconst EVENT_KEY = `.${DATA_KEY}`;\r\nconst DATA_API_KEY = '.data-api';\r\nconst JQUERY_NO_CONFLICT = $.fn[NAME];\r\n\r\nconst Selector = {\r\n  DISMISS: '[data-dismiss=\"alert\"]' // eslint-disable-line quotes\r\n};\r\n\r\nconst Event = {\r\n  CLOSE:  `close${EVENT_KEY}`,\r\n  CLOSED: `closed${EVENT_KEY}`,\r\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`\r\n};\r\n\r\nconst ClassName = {\r\n  ALERT: 'alert',\r\n  FADE: 'fade',\r\n  SHOW: 'show'\r\n};\r\n/**\r\n *  Class Defination\r\n */\r\nclass Alert {\r\n\r\n  constructor(element) {\r\n    this._element = element;\r\n  }\r\n\r\n  // Getters\r\n  static get VERSION() {\r\n    return VERSION;\r\n  }\r\n\r\n  // Public\r\n  close(element) {\r\n    element = element || this._element;\r\n    const rootElement = this._getRootElement(element);\r\n    const customEvent = this._triggerCloseEvent(rootElement);\r\n    if (customEvent.isDefaultPrevented()) {\r\n      return;\r\n    }\r\n    this._removeElement(rootElement);\r\n  }\r\n\r\n  dispose() {\r\n    $.removeData(this._element, DATA_KEY);\r\n    this._element = null;\r\n  }\r\n\r\n  // Private\r\n  _getRootElement(element) {\r\n    const selector = Util.getSelectorFromElement(element);\r\n    let parent = false;\r\n    if (selector) {\r\n      parent = $(selector)[0];        \r\n    }\r\n    if (!parent) {\r\n      parent = $(element).closest(`.${ClassName.ALERT}`)[0];\r\n    }\r\n    return parent;\r\n  }\r\n\r\n  _triggerCloseEvent(element) {\r\n    const closeEvent = $.Event(Event.CLOSE);\r\n    $(element).trigger(closeEvent);\r\n    // console.log(\"closeEventTriggered\");\r\n    return closeEvent;\r\n  }\r\n\r\n  _removeElement(element) {\r\n    $(element).removeClass(ClassName.SHOW);\r\n    if(!$(element).hasClass(ClassName.FADE)) {\r\n      this._destoryElement(element);\r\n      return;\r\n    }\r\n    const transitionDuration = Util.getTransitionDurationFromElement(element);\r\n    $(element)\r\n      .one(Util.TRANSITION_END, (event) => this._destoryElement(element, event))\r\n      .emulateTransitionEnd(transitionDuration);\r\n  }\r\n\r\n  _destoryElement(element) {\r\n    $(element)\r\n      .detach()\r\n      .trigger(Event.CLOSED)\r\n      .remove();\r\n  }\r\n  \r\n  // Static\r\n\r\n  static _jQueryInterface(config) {\r\n    return this.each(function () {\r\n      const $element = $(this);\r\n      let data = $element.data(DATA_KEY);\r\n\r\n      if (!data) {\r\n        data = new Alert(this);\r\n        $element.data(DATA_KEY, data);\r\n      }\r\n\r\n      if (config === 'close') {\r\n        data[config](this);\r\n      } else if (config === 'dispose') {\r\n        data[config]();\r\n      }\r\n    });\r\n  }\r\n\r\n  static _handleDismiss(alertInstance) {\r\n    return function (event) {\r\n      if (event) {\r\n        event.preventDefault();\r\n      }\r\n\r\n      alertInstance.close(this);\r\n    };\r\n  }\r\n}\r\n\r\n$(document).on(\r\n  Event.CLICK_DATA_API,\r\n  Selector.DISMISS,\r\n  Alert._handleDismiss(new Alert())\r\n);\r\n\r\n\r\n$.fn[NAME] = Alert._jQueryInterface;\r\n$.fn[NAME].Constructor = Alert;\r\n$.fn[NAME].noConflict = () => {\r\n  $.fn[NAME] = JQUERY_NO_CONFLICT;\r\n  return Alert._jQueryInterface;\r\n};\r\n\r\nexport default Alert;\r\n"],"file":"alert.js"}