{"version":3,"sources":["../src/util.js"],"names":["TRANSITION_END","MILLISECONDS_MULTIPLIER","escapeId","selector","$","escapeSelector","substr","replace","gerSpecialTransitionEndEvent","bindType","delegateType","handle","event","target","is","handleObj","handler","apply","arguments","transitionEndEmulator","duration","called","one","Util","setTimeout","triggerTransitionEnd","setTransitionEndSupport","fn","emulateTransitionEnd","special","getSelectorFromElement","element","getAttribute","charAt","$selector","document","find","length","err","getTransitionDurationFromElement","transitionDuration","css","transitionDelay","floatTransitionDuration","parseFloat","floatTransitionDelay","split","trigger"],"mappings":"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","sourcesContent":["import $ from 'jquery';\r\n\r\n/**\r\n * Private TransitionEnd Helpers\r\n */\r\n\r\nconst TRANSITION_END = 'transitionend';\r\nconst MILLISECONDS_MULTIPLIER = 1000;\r\n\r\nfunction escapeId(selector) {\r\n  // escape IDs in case of special selectors (selector = '#myId;#,.[]=@)\r\n  // $.escapeSelector does not exist in jQuery < 3\r\n  selector = typeof $.escapeSelector === 'function' ? $.escapeSelector(selector).substr(1)\r\n    : selector.replace(/(:|\\.|\\[|\\]|,|=|@|#)/g, '\\\\$1').substr(1);\r\n  \r\n  return selector;\r\n}\r\n\r\nfunction gerSpecialTransitionEndEvent() {\r\n  return {\r\n    bindType: TRANSITION_END,\r\n    delegateType: TRANSITION_END,\r\n    handle(event) {\r\n      if($(event.target).is(this)) {\r\n        return event.handleObj.handler.apply(this, arguments);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction transitionEndEmulator(duration) {\r\n  let called = false;\r\n\r\n  $(this).one(Util.TRANSITION_END, () => {\r\n    called = true;\r\n  });\r\n\r\n  setTimeout(() => {\r\n    if(!called) {\r\n      Util.triggerTransitionEnd(this);\r\n    }\r\n  }, duration);\r\n}\r\n\r\nfunction setTransitionEndSupport() {\r\n  $.fn.emulateTransitionEnd = transitionEndEmulator;\r\n  $.event.special[Util.TRANSITION_END] = gerSpecialTransitionEndEvent();\r\n}\r\n\r\n/**\r\n *  Public Util Api\r\n */\r\n\r\nconst Util = {\r\n\r\n  TRANSITION_END: 'bsTransitionEnd',\r\n  \r\n  getSelectorFromElement(element) {\r\n    let selector = element.getAttribute('data-target');\r\n    if (!selector || selector === '#') {\r\n      selector = element.getAttribute('href') || '';\r\n    }\r\n    // If it's an ID\r\n    if (selector.charAt(0) === '#') {\r\n      selector = escapeId(selector);\r\n    }\r\n    try {\r\n      const $selector = $(document).find(selector);\r\n      return $selector.length > 0 ? selector : null;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  getTransitionDurationFromElement(element) {\r\n    if(!element) {\r\n      return 0;\r\n    }\r\n    let transitionDuration = $(element).css('transition-duration');\r\n    let transitionDelay = $(element).css('transition-delay');\r\n    const floatTransitionDuration = parseFloat(transitionDuration);\r\n    const floatTransitionDelay = parseFloat(transitionDelay);\r\n    if(!floatTransitionDuration && !floatTransitionDelay) {\r\n      return 0;\r\n    }\r\n    transitionDuration = transitionDuration.split(',')[0];\r\n    transitionDelay = transitionDelay.split(',')[0];\r\n    return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER;\r\n  },\r\n\r\n  triggerTransitionEnd(element) {\r\n    $(element).trigger(TRANSITION_END);\r\n  }\r\n};\r\n\r\nsetTransitionEndSupport();\r\n\r\nexport default Util;"],"file":"util.js"}